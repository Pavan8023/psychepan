<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blogs - Psyche Panacea</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#0052cc',
            secondary: '#4da8ff',
            dark: '#1a1a1a',
            light: '#f8f9fa',
            accent: '#f59e0b',
            insta: '#E1306C',
            header: '#1877F2',
          },
          fontFamily: {
            sans: ['Noto Sans', 'sans-serif'],
          },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-out',
            'slide': 'slide 25s linear infinite',
            'popup-fade': 'popupFadeIn 0.3s ease forwards',
            'slide-up': 'slideUp 0.3s ease forwards',
            'message-fade': 'messageFadeIn 0.3s ease',
          },
          keyframes: {
            fadeIn: {
              from: { opacity: 0 },
              to: { opacity: 1 },
            },
            slide: {
              '0%': { transform: 'translateX(100%)' },
              '100%': { transform: 'translateX(-100%)' },
            },
            popupFadeIn: {
              from: { transform: 'scale(0.95)', opacity: 0 },
              to: { transform: 'scale(1)', opacity: 1 },
            },
            slideUp: {
              from: { transform: 'translateY(20px)', opacity: 0 },
              to: { transform: 'translateY(0)', opacity: 1 },
            },
            messageFadeIn: {
              from: { opacity: 0, transform: 'translateY(10px)' },
              to: { opacity: 1, transform: 'translateY(0)' },
            },
          }
        }
      }
    }

    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyA8t0YBEkZ-hDHmw7u8aud-jwNybYEKnbU",
      authDomain: "psypanweb-7747a.firebaseapp.com",
      projectId: "psypanweb-7747a",
      storageBucket: "psypanweb-7747a.appspot.com",
      messagingSenderId: "441049264188",
      appId: "1:441049264188:web:4dab8de0554b2c7c741339",
      measurementId: "G-C1CTMX729Z"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans', sans-serif;
      background-color: #fafafa;
      color: #1a1a1a;
      overflow-x: hidden;
    }

    .tab-gradient {
      background: linear-gradient(135deg, #0052cc, #4da8ff);
    }

    /* Header */
    header {
      background-color: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      position: fixed;
      width: 100%;
      z-index: 1000;
      padding: 1.2rem 3rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    nav a {
      position: relative;
      transition: color 0.3s ease;
    }

    nav a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -4px;
      left: 0;
      background-color: #0052cc;
      transition: width 0.3s ease;
    }

    nav a:hover::after {
      width: 100%;
    }

    /* Instagram Style Blog Card */
    .blog-card {
      transition: all 0.3s ease;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      background: white;
      border: 1px solid #efefef;
      max-width: 400px;
      margin: 0 auto;
    }

    .blog-card:hover {
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .blog-image,
    .blog-video {
      height: 280px;
      width: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .blog-card:hover .blog-image,
    .blog-card:hover .blog-video {
      transform: scale(1.02);
    }

    .content-preview {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .read-more-btn {
      color: #0052cc;
      font-weight: 600;
      transition: all 0.3s ease;
      font-size: 14px;
    }

    .read-more-btn:hover {
      color: #4da8ff;
    }

    .social-btn {
      transition: all 0.3s ease;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .like-btn:hover {
      background-color: rgba(255, 0, 85, 0.1);
      color: #ff0055;
    }

    .comment-btn:hover {
      background-color: rgba(0, 184, 124, 0.1);
      color: #00b87c;
    }

    .share-btn:hover {
      background-color: rgba(0, 119, 255, 0.1);
      color: #0077ff;
    }

    /* Instagram Style Modal */
    .blog-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .blog-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      max-width: 900px;
      width: 90%;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transform: scale(0.95);
      transition: transform 0.3s ease;
    }

    .blog-modal.active .modal-content {
      transform: scale(1);
    }

    /* Instagram-like modal */
    .modal-header {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      border-bottom: 1px solid #efefef;
      background-color: #1877F2;
      color: white;
    }

    .modal-username {
      font-weight: 600;
      margin-left: 12px;
      font-size: 14px;
      color: white;
    }

    .modal-image-container {
      position: relative;
      background: #f0f2f5;
      height: 500px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-image,
    .modal-video {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .modal-actions {
      padding: 12px 16px;
      border-bottom: 1px solid #efefef;
      background-color: #f0f2f5;
    }

    .action-icons {
      display: flex;
      gap: 16px;
    }

    .like-count {
      font-weight: 600;
      padding: 8px 16px 4px;
      font-size: 14px;
      background-color: #f0f2f5;
    }

    .modal-caption {
      padding: 0 16px 12px;
      font-size: 14px;
      background-color: #f0f2f5;
    }

    .caption-username {
      font-weight: 600;
      margin-right: 8px;
      font-size: 14px;
    }

    .post-time {
      color: #8e8e8e;
      font-size: 10px;
      letter-spacing: 0.5px;
      padding: 0 16px 12px;
      text-transform: uppercase;
      background-color: #f0f2f5;
    }

    .comment-section {
      border-top: 1px solid #efefef;
      padding: 16px;
      flex-grow: 1;
      overflow-y: auto;
      max-height: 200px;
      background-color: white;
    }

    .comment-card {
      display: flex;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .comment-user {
      font-weight: 600;
      margin-right: 8px;
    }

    .comment-input-container {
      display: flex;
      align-items: center;
      border-top: 1px solid #efefef;
      padding: 14px 16px;
      background-color: #f0f2f5;
      flex-direction: column;
    }

    .commenter-name-container {
      width: 100%;
      margin-bottom: 10px;
      display: none;
    }

    .commenter-name-container.active {
      display: flex;
      align-items: center;
    }

    .comment-input {
      flex-grow: 1;
      border: none;
      padding: 8px 12px;
      outline: none;
      font-size: 14px;
      background: white;
      border-radius: 20px;
      width: 100%;
    }

    .post-comment-btn {
      color: #1877F2;
      font-weight: 600;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
      margin-left: 10px;
      padding: 8px 16px;
    }

    .comment-input-row {
      display: flex;
      width: 100%;
    }

    /* Animation */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .blog-item {
      animation: slideUp 0.5s ease forwards;
      opacity: 0;
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      header {
        padding: 1rem 1.5rem;
      }

      .hero-section {
        padding-top: 100px;
      }

      .modal-content {
        width: 95%;
        max-height: 85vh;
      }

      .modal-image-container {
        height: 300px;
      }
    }

    @media (max-width: 640px) {
      .modal-content {
        height: 90vh;
      }
    }

    /* Chatbot */
    .chatbot-window {
      transition: all 0.2s ease;
    }

    .chatbot-window.active {
      opacity: 1;
    }

    /* Instagram-like blog card styling */
    .blog-header {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      background-color: #1877F2;
      color: white;
    }

    .blog-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
    }

    .blog-footer {
      padding: 12px 16px;
      border-top: 1px solid #efefef;
      background-color: #f0f2f5;
    }

    .blog-actions {
      display: flex;
      gap: 16px;
      margin-bottom: 8px;
    }

    .blog-likes {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 8px;
      color: #333;
    }

    .blog-comments-count {
      color: #8e8e8e;
      font-size: 14px;
      cursor: pointer;
    }

    .blog-date {
      color: #8e8e8e;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Instagram gradient heart */
    .liked {
      color: #ed4956 !important;
    }

    /* Loading spinner */
    .loader {
      width: 48px;
      height: 48px;
      border: 5px solid #1877F2;
      border-bottom-color: transparent;
      border-radius: 50%;
      display: inline-block;
      animation: rotation 1s linear infinite;
    }

    @keyframes rotation {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .error-message {
      color: #e53e3e;
      text-align: center;
      padding: 10px;
      font-size: 14px;
    }

    .video-icon {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 5px;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .media-container {
      position: relative;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="flex items-center space-x-2">
      <img class="h-12 w-14" src="/images/psypan-logo-transparent.png" alt="Psyche Panacea">
      <div class="text-2xl font-bold text-primary">Psyche Panacea</div>
    </div>
    <nav class="hidden md:flex items-center space-x-6">
      <a href="index.html" class="text-gray-700 hover:text-primary transition-colors px-2 py-1">Home</a>
      <a href="services.html" class="text-gray-700 hover:text-primary transition-colors px-2 py-1">Services</a>
      <a href="flagship-programs.html" class="text-gray-700 hover:text-primary transition-colors px-2 py-1">Flagship
        Programs</a>
      <a href="events.html" class="text-gray-700 hover:text-primary transition-colors px-2 py-1">Events</a>
      <a href="gallery.html" class="text-gray-700 hover:text-primary transition-colors px-2 py-1">Gallery</a>
      <a href="about-us.html" class="text-gray-700 hover:text-primary transition-colors px-2 py-1">About Us</a>
      <a href="blogs.html" class="text-primary font-semibold transition-colors px-2 py-1">Blogs</a>
      <a href="contact.html" class="text-gray-700 hover:text-primary transition-colors px-2 py-1">Contact</a>
    </nav>

    <!-- Mobile Menu Button -->
    <div class="md:hidden flex items-center">
      <button id="mobile-menu-button" class="text-gray-700 hover:text-primary">
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </header>

  <!-- Mobile Dropdown Menu -->
  <div id="mobile-menu" class="md:hidden bg-white shadow-lg rounded-b-lg hidden">
    <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
      <a href="index.html"
        class="mt-14 block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-blue-50">Home</a>
      <a href="services.html"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-blue-50">Services</a>
      <a href="flagship-programs.html"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-blue-50">Flagship
        Programs</a>
      <a href="events.html"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-blue-50">Events</a>
      <a href="gallery.html"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-blue-50">Gallery</a>
      <a href="about-us.html"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-blue-50">About
        Us</a>
      <a href="blogs.html" class="block px-3 py-2 rounded-md text-base font-medium text-primary bg-blue-50">Blogs</a>
      <a href="contact.html"
        class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-blue-50">Contact</a>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="hero-section pt-32 pb-20 bg-gradient-to-r from-primary to-blue-600 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="text-4xl md:text-5xl font-bold mb-6">Psyche Panacea Blogs</h1>
      <div class="h-1 w-24 bg-white mx-auto rounded mb-8"></div>
      <p class="text-xl mb-8 text-blue-100 max-w-3xl mx-auto">
        Insights, stories, and perspectives from our team of experts
      </p>
    </div>
  </section>

  <!-- Blogs Section -->
  <section class="py-16 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-4">Social Feed</h2>
        <p class="text-gray-600 max-w-2xl mx-auto">Discover real-time updates, highlights, and posts that showcase our
          work and impact.</p>
      </div>

      <!-- Blog Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="blogs-container">
        <!-- Blogs will be loaded here dynamically -->
        <div class="text-center py-10 col-span-full">
          <div class="inline-block mb-4">
            <span class="loader"></span>
          </div>
          <p class="text-gray-500">Loading blogs...</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Blog Modal -->
  <div class="blog-modal fixed inset-0 z-50 bg-black bg-opacity-70 flex items-center justify-center"
    style="z-index: 2000;" id="blog-modal">
    <div
      class="modal-content bg-white w-full max-w-3xl h-[90vh] md:h-[85vh] rounded-lg shadow-lg flex flex-col overflow-hidden">

      <!-- Modal Header -->
      <div class="modal-header flex items-center p-4 border-b border-gray-200 bg-gray-100">
        <div
          class="blog-avatar bg-primary text-white w-10 h-10 rounded-full flex items-center justify-center font-bold">PP
        </div>
        <div class="modal-username ml-3 font-semibold text-gray-800">psyche_panacea</div>
        <button class="ml-auto text-2xl text-gray-600 hover:text-black" id="close-modal">&times;</button>
      </div>

      <!-- Modal Media -->
      <div class="modal-image-container h-64 md:h-80 w-full">
        <img id="modal-image" src="" alt="" class="modal-image w-full h-full object-cover hidden">
        <video id="modal-video" class="modal-video w-full h-full" controls style="display: none;"></video>
      </div>

      <!-- Scrollable Body -->
      <div class="flex-1 overflow-y-auto bg-white">

        <!-- Modal Actions -->
        <div class="modal-actions px-4 py-3 border-b border-gray-200">
          <div class="action-icons flex space-x-4 items-center text-gray-600">
            <button class="like-btn social-btn" id="modal-like-btn">
              <i class="far fa-heart text-xl hover:text-red-500 transition"></i>
            </button>
            <button class="comment-btn social-btn">
              <i class="far fa-comment text-xl hover:text-blue-500 transition"></i>
            </button>
            <button class="share-btn social-btn" id="share-btn">
              <i class="fas fa-share-alt text-xl hover:text-green-500 transition"></i>
            </button>
          </div>
        </div>

        <!-- Like Count -->
        <div class="like-count px-4 py-2 font-semibold text-sm text-gray-800">
          <span id="like-count">0</span> likes
        </div>

        <!-- Caption -->
        <div class="modal-caption px-4 pb-2 text-sm text-gray-700">
          <span class="caption-username font-semibold">psyche_panacea</span>
          <span id="modal-caption"></span>
        </div>

        <!-- Post Time -->
        <div class="post-time px-4 text-xs text-gray-400 uppercase tracking-wide" id="modal-date"></div>

        <!-- Comments Section -->
        <div id="comments-container" class="comment-section px-4 py-4 space-y-4 text-sm text-gray-800">
          <!-- Sample comments (replace with dynamic ones) -->
          <div class="text-center py-6 text-gray-400" id="no-comments">
            <i class="fas fa-comment-alt text-2xl mb-2"></i>
            <p>No comments yet</p>
          </div>
        </div>
      </div>

      <!-- Comment Input (Sticky Footer) -->
      <div class="comment-input-container border-t border-gray-200 bg-white p-3">
        <!-- Commenter Name Input -->
        <div class="commenter-name-container" id="commenter-name-container">
          <input type="text" id="commenter-name" placeholder="Your Name"
            class="comment-input flex-1 px-4 py-2 border rounded-full text-sm focus:outline-none focus:ring-1 focus:ring-primary">
          <button id="save-name-btn"
            class="post-comment-btn text-primary font-semibold text-sm hover:underline ml-2">Save</button>
        </div>

        <!-- Comment Input -->
        <div class="comment-input-row">
          <input type="text" id="comment-input" placeholder="Add a comment..."
            class="comment-input flex-1 px-4 py-2 border rounded-full text-sm focus:outline-none focus:ring-1 focus:ring-primary">
          <button id="submit-comment"
            class="post-comment-btn text-primary font-semibold text-sm hover:underline">Post</button>
        </div>
      </div>

    </div>
  </div>


  <!-- Footer -->
  <footer class="bg-gray-900 text-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
        <!-- Left half: Map -->
        <div class="w-full h-64 sm:h-80 md:h-96 rounded-xl overflow-hidden border-2 border-blue-700 shadow-lg">
          <iframe src="https://maps.google.com/maps?q=28.467519771527627,77.03697016794533&z=15&output=embed"
            width="100%" height="100%" frameborder="0" style="border:0;" allowfullscreen loading="lazy"
            class="filter grayscale hover:grayscale-0 transition-all duration-500 pointer-events-auto"
            gestureHandling="greedy">
          </iframe>
        </div>

        <!-- Right half: Content -->
        <div class="grid grid-cols-1 gap-8">
          <!-- Company Info -->
          <div>
            <div class="flex items-center mb-4">
              <div class="bg-gradient-to-r from-blue-600 to-blue-800 p-2 rounded-lg mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24"
                  stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                </svg>
              </div>
              <h3 class="text-xl font-bold text-blue-400">Psyche Panacea</h3>
            </div>
            <p class="text-gray-400">
              Pioneers of innovative and breakthrough methodologies in the Indian consultation arena,
              transforming organizations through strategic HR solutions.
            </p>
          </div>

          <!-- Contact Info -->
          <div>
            <h4 class="text-lg font-semibold mb-3 text-blue-400 border-b border-blue-700 pb-1">Contact Us
            </h4>
            <ul class="space-y-4 text-gray-400 text-sm">
              <li class="flex items-start">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 mt-1 text-blue-500" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                <span>308/2, Old Delhi Rd, adjacent Country Inn,<br>Sector 12 A, Anamika
                  Enclave,<br>Sector 14, Gurugram, Haryana 122001</span>
              </li>
              <li class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-blue-500" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
                <span>09810323292, 09810319292</span>
              </li>
              <li class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-blue-500" fill="none"
                  viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                <span>hr@psypanconsulting.com</span>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Footer Bottom -->
      <div class="border-t border-gray-800 mt-12 pt-6 text-center text-gray-500 text-sm">
        <p>© 2023 Psyche Panacea. All rights reserved. Designed by Psyche Panacea Team.</p>
      </div>
    </div>
  </footer>

  <!-- ====== Chatbot (copy-paste into your HTML) ====== -->
  <div class="chatbot fixed bottom-6 right-4 z-50">
    <!-- Toggle / Floating Button -->
    <button id="chatbotToggle"
      class="chatbot-toggle w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center cursor-pointer shadow-lg text-white"
      aria-label="Open chat">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        class="opacity-95">
        <path
          d="M21 11.5a8.38 8.38 0 0 1-12.5 7.5 8.38 8.38 0 0 1-7.5-12.5 8.38 8.38 0 0 1 12.5-7.5 8.38 8.38 0 0 1 7.5 12.5z" />
        <path d="M9 9h6v6H9z" />
      </svg>
    </button>

    <!-- Chat window -->
    <div id="chatbotWindow"
      class="chatbot-window w-80 sm:w-96 max-h-[540px] absolute bottom-20 sm:bottom-24 right-0 bg-white rounded-xl shadow-2xl hidden border border-blue-100 flex flex-col overflow-hidden">
      <!-- Header -->
      <div
        class="chatbot-header bg-gradient-to-r from-primary to-blue-600 text-white p-3 sm:p-4 rounded-t-xl flex justify-between items-center">
        <div>
          <div class="font-bold text-sm sm:text-base">Psyche Panacea Assistant</div>
          <div class="text-xs opacity-90">Corporate Training & HR Support</div>
        </div>
        <div class="flex items-center gap-2">
          <button id="chatClear" title="Clear chat"
            class="text-xs bg-white/10 px-2 py-1 rounded-md hover:bg-white/20">Clear</button>
          <button id="chatbotClose" class="chatbot-close text-2xl leading-none">×</button>
        </div>
      </div>

      <!-- Body -->
      <div id="chatbotBody" class="chatbot-body p-3 sm:p-4 overflow-y-auto flex-1 space-y-3 bg-white">
        <div
          class="chatbot-message bot bg-blue-50 text-gray-800 rounded-lg p-2 sm:p-3 mb-1 max-w-[86%] float-left clear-both text-sm sm:text-base">
          Welcome! Choose an option below or type your question. 👇
        </div>

        <!-- quick options container -->
        <div id="chatOptions" class="w-full flex flex-wrap gap-2"></div>
      </div>

      <!-- Input area -->
      <div class="chatbot-input p-2 sm:p-3 border-t border-gray-200 flex gap-2 items-center">
        <input id="chatbotInput" type="text"
          class="flex-1 p-2 sm:p-3 border border-gray-300 rounded-lg text-sm sm:text-base focus:outline-none"
          placeholder="Ask about our programs or click an option...">
        <button id="chatbotSend"
          class="bg-primary text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg font-semibold text-sm sm:text-base">Send</button>
      </div>
    </div>
  </div>

  <script>
    // Firebase Firestore references
    const blogsCollection = db.collection("blogs");
    const commentsCollection = db.collection("comments");

    // DOM elements
    const blogsContainer = document.getElementById('blogs-container');
    const blogModal = document.getElementById('blog-modal');
    const closeModal = document.getElementById('close-modal');
    const modalImage = document.getElementById('modal-image');
    const modalVideo = document.getElementById('modal-video');
    const modalCaption = document.getElementById('modal-caption');
    const modalDate = document.getElementById('modal-date');
    const likeBtn = document.getElementById('modal-like-btn');
    const likeCount = document.getElementById('like-count');
    const shareBtn = document.getElementById('share-btn');
    const commentsContainer = document.getElementById('comments-container');
    const commentInput = document.getElementById('comment-input');
    const submitComment = document.getElementById('submit-comment');
    const commenterNameInput = document.getElementById('commenter-name');
    const saveNameBtn = document.getElementById('save-name-btn');
    const commenterNameContainer = document.getElementById('commenter-name-container');

    // Current blog ID for modal
    let currentBlogId = null;
    let currentBlogData = null;
    let currentCommenterName = localStorage.getItem('commenterName') || '';

    // Track comment timers for real-time updates
    const commentTimers = {};

    // Format relative time for comments
    function formatRelativeTime(timestamp) {
      const now = new Date();
      const diff = now - timestamp; // in milliseconds

      const seconds = Math.floor(diff / 1000);
      const minutes = Math.floor(seconds / 60);
      const hours = Math.floor(minutes / 60);
      const days = Math.floor(hours / 24);

      if (seconds < 60) {
        return 'just now';
      } else if (minutes < 60) {
        return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
      } else if (hours < 24) {
        return `${hours} hour${hours > 1 ? 's' : ''} ago`;
      } else if (days < 30) {
        return `${days} day${days > 1 ? 's' : ''} ago`;
      } else {
        return timestamp.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
      }
    }

    // Update relative time for a comment element
    function updateRelativeTime(element, timestamp) {
      element.textContent = formatRelativeTime(timestamp);
    }

    // Start a timer to update relative time for a comment
    function startRelativeTimeUpdater(element, timestamp) {
      // Clear any existing interval for this element
      if (commentTimers[element.id]) {
        clearInterval(commentTimers[element.id]);
      }

      // Update immediately
      updateRelativeTime(element, timestamp);

      // If the comment is less than 60 minutes old, update every minute
      const now = new Date();
      const diff = now - timestamp;
      if (diff < 60 * 60 * 1000) {
        commentTimers[element.id] = setInterval(() => {
          updateRelativeTime(element, timestamp);
        }, 60000); // Update every minute
      }
    }

    // Check if URL is a video
    function isVideo(url) {
      const videoExtensions = ['.mp4', '.webm', '.ogg', '.mov'];
      return videoExtensions.some(ext => url.toLowerCase().includes(ext));
    }

    // Load blogs from Firestore
    function loadBlogs() {
      blogsContainer.innerHTML = '<div class="text-center py-10 col-span-full"><div class="inline-block mb-4"><span class="loader"></span></div><p class="text-gray-500">Loading blogs...</p></div>';

      blogsCollection.orderBy("createdAt", "desc").get().then(querySnapshot => {
        blogsContainer.innerHTML = '';

        if (querySnapshot.empty) {
          blogsContainer.innerHTML = `
            <div class="text-center py-10 col-span-full">
              <div class="inline-block mb-4">
                <i class="fas fa-file-alt text-4xl text-gray-400"></i>
              </div>
              <p class="text-gray-500">No blog posts found</p>
            </div>
          `;
          return;
        }

        let delay = 0;
        querySnapshot.forEach(doc => {
          const blog = doc.data();
          const blogId = doc.id;

          // Convert Firestore timestamp to JavaScript Date
          const createdAt = blog.createdAt ? blog.createdAt.toDate() : new Date();
          const formattedDate = createdAt.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          });

          // Check if user has liked this blog in current session
          const hasLiked = sessionStorage.getItem(`liked_${blogId}`) === 'true';
          const heartIcon = hasLiked ? 'fas fa-heart text-xl liked' : 'far fa-heart text-xl';

          const blogElement = document.createElement('div');
          blogElement.className = 'blog-item blog-card bg-white';
          blogElement.style.animationDelay = `${delay}ms`;
          delay += 150;

          // Truncate content for preview
          const truncatedContent = blog.content.length > 120 ?
            blog.content.substring(0, 120) + '...' : blog.content;

          // Determine if media is image or video
          const mediaUrl = blog.image || '';
          const isVideoMedia = isVideo(mediaUrl);

          blogElement.innerHTML = `
            <div class="blog-header">
              <div class="blog-avatar">PP</div>
              <div class="modal-username">psyche_panacea</div>
            </div>
            <div class="media-container relative">
            ${isVideoMedia ?
              `<video id="blog-video-${blog.id}" 
            class="blog-video w-full" 
            poster="${blog.thumbnail || ''}" 
            autoplay muted controls controlsList="nodownload"
            style="object-fit: cover;">
      <source src="${mediaUrl}" type="video/mp4">
    </video>

    <!-- Play Icon Overlay -->
    <div id="play-icon-${blog.id}" 
         class="video-icon absolute inset-0 flex items-center justify-center bg-black/30 cursor-pointer">
      
    </div>`
              :
              `<img src="${mediaUrl}" alt="${blog.title}" class="blog-image w-full">`
            }
</div>

            <div class="blog-footer">
              <div class="blog-actions">
                <button class="like-btn social-btn" data-id="${blogId}">
                  <i class="${heartIcon}"></i>
                </button>
                <button class="comment-btn social-btn" data-id="${blogId}">
                  <i class="far fa-comment text-xl"></i>
                </button>
                <button class="share-btn social-btn" data-id="${blogId}">
                  <i class="fas fa-share-alt text-xl"></i>
                </button>
              </div>
              <div class="blog-likes">
                <span id="like-count-${blogId}">${blog.likes || 0}</span> likes
              </div>
              <div class="content-preview text-gray-800 text-sm mb-2">
                <span class="font-semibold">psyche_panacea</span> ${truncatedContent}
              </div>
              <div class="blog-comments-count" id="comment-count-${blogId}">
                View all <span>${blog.comments || 0}</span> comments
              </div>
              <div class="blog-date">
                ${formattedDate}
              </div>
            </div>
          `;

          blogsContainer.appendChild(blogElement);

          // Add event listeners to buttons
          blogElement.querySelector(`.like-btn[data-id="${blogId}"]`).addEventListener('click', () => {
            toggleLike(blogId);
          });

          blogElement.querySelector(`.comment-btn[data-id="${blogId}"]`).addEventListener('click', () => {
            openBlogModal(blogId);
          });

          blogElement.querySelector(`.share-btn[data-id="${blogId}"]`).addEventListener('click', () => {
            shareBlog(blog);
          });

          // Add play button functionality for videos
          if (isVideoMedia) {
            const videoElement = blogElement.querySelector('video');
            const playButton = blogElement.querySelector('.video-icon');

            playButton.addEventListener('click', () => {
              videoElement.play();
              playButton.style.display = 'none';
            });

            videoElement.addEventListener('pause', () => {
              playButton.style.display = 'flex';
            });
          }
        });
      }).catch(error => {
        console.error("Error loading blogs: ", error);
        blogsContainer.innerHTML = `
          <div class="text-center py-10 col-span-full">
            <div class="inline-block mb-4">
              <i class="fas fa-exclamation-triangle text-4xl text-red-500"></i>
            </div>
            <p class="text-gray-500">Error loading blogs. Please try again later.</p>
          </div>
        `;
      });
    }

    // Toggle like for a blog
    function toggleLike(blogId) {
      // Check if user has already liked in this session
      const hasLiked = sessionStorage.getItem(`liked_${blogId}`) === 'true';
      let increment = 1;

      if (hasLiked) {
        // User is unliking
        increment = -1;
        sessionStorage.setItem(`liked_${blogId}`, 'false');
      } else {
        // User is liking
        sessionStorage.setItem(`liked_${blogId}`, 'true');
      }

      const likeCountElement = document.getElementById(`like-count-${blogId}`);
      const currentCount = parseInt(likeCountElement.textContent);
      const likeButtonIcon = document.querySelector(`.like-btn[data-id="${blogId}"] i`);

      // Update UI immediately
      likeCountElement.textContent = currentCount + increment;

      if (hasLiked) {
        likeButtonIcon.className = "far fa-heart text-xl";
      } else {
        likeButtonIcon.className = "fas fa-heart text-xl liked";
      }

      // Update Firestore
      const blogRef = blogsCollection.doc(blogId);

      blogRef.update({
        likes: firebase.firestore.FieldValue.increment(increment)
      })
        .catch(error => {
          console.error("Error updating like: ", error);
          // Revert UI if update fails
          likeCountElement.textContent = currentCount;
          if (hasLiked) {
            likeButtonIcon.className = "fas fa-heart text-xl liked";
            sessionStorage.setItem(`liked_${blogId}`, 'true');
          } else {
            likeButtonIcon.className = "far fa-heart text-xl";
            sessionStorage.setItem(`liked_${blogId}`, 'false');
          }
        });

      // If modal is open for this blog, update modal UI
      if (currentBlogId === blogId) {
        const modalLikeBtn = document.getElementById('modal-like-btn');
        const modalLikeCount = document.getElementById('like-count');
        const modalCurrentCount = parseInt(modalLikeCount.textContent);

        modalLikeCount.textContent = modalCurrentCount + increment;

        if (hasLiked) {
          modalLikeBtn.innerHTML = '<i class="far fa-heart text-xl"></i>';
        } else {
          modalLikeBtn.innerHTML = '<i class="fas fa-heart text-xl liked"></i>';
        }
      }
    }

    // Open blog modal
    function openBlogModal(blogId) {
      currentBlogId = blogId;

      // Show loading state
      commentsContainer.innerHTML = '<p class="text-center text-gray-500 py-4">Loading blog...</p>';

      // Fetch blog data from Firestore
      blogsCollection.doc(blogId).get().then(doc => {
        if (!doc.exists) {
          commentsContainer.innerHTML = '<p class="text-center text-red-500 py-4">Blog not found!</p>';
          setTimeout(closeBlogModal, 2000);
          return;
        }

        const blog = doc.data();
        currentBlogData = blog;

        // Set blog data in modal
        const mediaUrl = blog.image || '';
        const isVideoMedia = isVideo(mediaUrl);

        if (isVideoMedia) {
          modalImage.style.display = 'none';
          modalVideo.style.display = 'block';
          modalVideo.src = mediaUrl;
          modalVideo.poster = blog.thumbnail || '';
          modalVideo.controls = true;
        } else {
          modalVideo.style.display = 'none';
          modalImage.style.display = 'block';
          modalImage.src = mediaUrl;
          modalImage.alt = blog.title;
        }

        modalCaption.textContent = blog.content.substring(0, 200) + (blog.content.length > 200 ? '...' : '');

        // Set formatted date
        const createdAt = blog.createdAt ? blog.createdAt.toDate() : new Date();
        const timeDiff = Date.now() - createdAt;
        const daysAgo = Math.floor(timeDiff / (1000 * 60 * 60 * 24));

        let timeText;
        if (daysAgo === 0) {
          timeText = 'TODAY';
        } else if (daysAgo === 1) {
          timeText = '1 DAY AGO';
        } else {
          timeText = `${daysAgo} DAYS AGO`;
        }

        modalDate.textContent = timeText;

        // Set like count
        likeCount.textContent = blog.likes || 0;

        // Check if user has liked this blog in current session
        const hasLiked = sessionStorage.getItem(`liked_${blogId}`) === 'true';
        if (hasLiked) {
          likeBtn.innerHTML = '<i class="fas fa-heart text-xl liked"></i>';
        } else {
          likeBtn.innerHTML = '<i class="far fa-heart text-xl"></i>';
        }

        // Load comments
        loadComments(blogId);

        // Open modal
        blogModal.classList.add('active');
        document.body.style.overflow = 'hidden';
      }).catch(error => {
        console.error("Error loading blog: ", error);
        commentsContainer.innerHTML = '<p class="text-center text-red-500 py-4">Error loading blog!</p>';
        setTimeout(closeBlogModal, 2000);
      });
    }

    // Close blog modal
    function closeBlogModal() {
      blogModal.classList.remove('active');
      document.body.style.overflow = 'auto';

      // Clear any comment timers
      for (const timerId in commentTimers) {
        clearInterval(commentTimers[timerId]);
        delete commentTimers[timerId];
      }

      // Pause any playing video
      if (modalVideo) {
        modalVideo.pause();
      }
    }

    // Load comments for a blog
    function loadComments(blogId) {
      commentsContainer.innerHTML = '<p class="text-center text-gray-500 py-4">Loading comments...</p>';

      // Check if collection exists
      commentsCollection.get().then(() => {
        // Collection exists, load comments
        commentsCollection.where("blogId", "==", blogId)
          .get()
          .then(querySnapshot => {
            commentsContainer.innerHTML = '';

            if (querySnapshot.empty) {
              commentsContainer.innerHTML = '<p class="text-center text-gray-500 py-4">No comments yet. Be the first to comment!</p>';
              return;
            }

            // Convert to array and sort by timestamp
            const comments = [];
            querySnapshot.forEach(doc => {
              const commentData = doc.data();
              commentData.id = doc.id;
              comments.push(commentData);
            });

            // Sort by timestamp descending
            comments.sort((a, b) => {
              const aTime = a.timestamp ? a.timestamp.toDate().getTime() : 0;
              const bTime = b.timestamp ? b.timestamp.toDate().getTime() : 0;
              return bTime - aTime;
            });

            // Display sorted comments
            comments.forEach(comment => {
              const commentDate = comment.timestamp ? comment.timestamp.toDate() : new Date();

              const commentElement = document.createElement('div');
              commentElement.className = 'comment-card';
              commentElement.innerHTML = `
                <div class="flex-shrink-0 mr-3">
                  <div class="w-8 h-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center">
                    <span class="text-xs font-bold text-gray-600">${comment.author.charAt(0).toUpperCase() || 'U'}</span>
                  </div>
                </div>
                <div class="flex-1">
                  <div class="flex justify-between items-center mb-1">
                    <span class="comment-user font-semibold">${comment.author || 'Anonymous'}</span>
                    <span class="text-xs text-gray-500" id="comment-time-${comment.id}"></span>
                  </div>
                  <p class="text-gray-800">${comment.content}</p>
                </div>
              `;

              commentsContainer.appendChild(commentElement);

              // Set and update relative time
              const timeElement = document.getElementById(`comment-time-${comment.id}`);
              if (timeElement) {
                updateRelativeTime(timeElement, commentDate);
                startRelativeTimeUpdater(timeElement, commentDate);
              }
            });
          })
          .catch(error => {
            console.error("Error loading comments: ", error);
            commentsContainer.innerHTML = '<p class="error-message">Error loading comments. Please try again later.</p>';
          });
      }).catch(() => {
        // Collection doesn't exist yet
        commentsContainer.innerHTML = '<p class="text-center text-gray-500 py-4">No comments yet. Be the first to comment!</p>';
      });
    }

    // Like a blog from modal
    function likeBlogModal() {
      if (!currentBlogId) return;

      // Check if user has already liked in this session
      const hasLiked = sessionStorage.getItem(`liked_${currentBlogId}`) === 'true';
      let increment = 1;

      if (hasLiked) {
        // User is unliking
        increment = -1;
        sessionStorage.setItem(`liked_${currentBlogId}`, 'false');
      } else {
        // User is liking
        sessionStorage.setItem(`liked_${currentBlogId}`, 'true');
      }

      const currentCount = parseInt(likeCount.textContent);
      const likeCountElement = document.getElementById(`like-count-${currentBlogId}`);
      const likeButtonIcon = document.querySelector(`.like-btn[data-id="${currentBlogId}"] i`);

      // Update UI immediately
      likeCount.textContent = currentCount + increment;

      if (hasLiked) {
        likeBtn.innerHTML = '<i class="far fa-heart text-xl"></i>';
      } else {
        likeBtn.innerHTML = '<i class="fas fa-heart text-xl liked"></i>';
      }

      if (likeCountElement) {
        likeCountElement.textContent = parseInt(likeCountElement.textContent) + increment;
      }
      if (likeButtonIcon) {
        if (hasLiked) {
          likeButtonIcon.className = "far fa-heart text-xl";
        } else {
          likeButtonIcon.className = "fas fa-heart text-xl liked";
        }
      }

      // Update Firestore
      const blogRef = blogsCollection.doc(currentBlogId);

      blogRef.update({
        likes: firebase.firestore.FieldValue.increment(increment)
      })
        .catch(error => {
          console.error("Error updating like: ", error);
          // Revert UI if update fails
          likeCount.textContent = currentCount;
          if (hasLiked) {
            likeBtn.innerHTML = '<i class="fas fa-heart text-xl liked"></i>';
            sessionStorage.setItem(`liked_${currentBlogId}`, 'true');
          } else {
            likeBtn.innerHTML = '<i class="far fa-heart text-xl"></i>';
            sessionStorage.setItem(`liked_${currentBlogId}`, 'false');
          }
          if (likeCountElement) likeCountElement.textContent = currentCount;
          if (likeButtonIcon) {
            if (hasLiked) {
              likeButtonIcon.className = "fas fa-heart text-xl liked";
            } else {
              likeButtonIcon.className = "far fa-heart text-xl";
            }
          }
        });
    }

    // Share a blog
    function shareBlog(blog) {
      if (navigator.share) {
        navigator.share({
          title: blog.title,
          text: blog.content.substring(0, 100) + '...',
          url: window.location.href
        })
          .then(() => console.log('Successful share'))
          .catch(error => console.log('Error sharing:', error));
      } else {
        // Fallback for browsers that don't support Web Share API
        const shareUrl = window.location.href;
        const tempInput = document.createElement('input');
        document.body.appendChild(tempInput);
        tempInput.value = shareUrl;
        tempInput.select();
        document.execCommand('copy');
        document.body.removeChild(tempInput);
        alert('Link copied to clipboard!');
      }
    }

    // Save commenter name
    function saveCommenterName() {
      const name = commenterNameInput.value.trim();
      if (name) {
        currentCommenterName = name;
        localStorage.setItem('commenterName', name);
        commenterNameContainer.classList.remove('active');
      }
    }

    // Add a comment
    function addComment() {
      if (!currentBlogId) return;

      const content = commentInput.value.trim();

      if (!content) {
        alert('Please enter a comment');
        return;
      }

      // Use saved name or "Anonymous" if not set
      const author = currentCommenterName || 'Unknown';

      // Add comment to Firestore
      commentsCollection.add({
        blogId: currentBlogId,
        content: content,
        author: author,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      })
        .then((docRef) => {
          // Update blog comment count
          const blogRef = blogsCollection.doc(currentBlogId);
          blogRef.update({
            comments: firebase.firestore.FieldValue.increment(1)
          })
            .then(() => {
              // Update comment count in modal and on blog card
              const commentCountElement = document.getElementById(`comment-count-${currentBlogId}`);
              if (commentCountElement) {
                const currentCount = parseInt(commentCountElement.querySelector('span').textContent);
                commentCountElement.querySelector('span').textContent = currentCount + 1;
              }

              // Add the new comment to the UI immediately
              const commentElement = document.createElement('div');
              commentElement.className = 'comment-card';
              const commentId = `comment-${Date.now()}`;
              commentElement.innerHTML = `
                <div class="flex-shrink-0 mr-3">
                  <div class="w-8 h-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center">
                    <span class="text-xs font-bold text-gray-600">${author.charAt(0).toUpperCase() || 'U'}</span>
                  </div>
                </div>
                <div class="flex-1">
                  <div class="flex justify-between items-center mb-1">
                    <span class="comment-user font-semibold">${author}</span>
                    <span class="text-xs text-gray-500" id="${commentId}-time"></span>
                  </div>
                  <p class="text-gray-800">${content}</p>
                </div>
              `;

              // If the "no comments" message is present, remove it
              if (commentsContainer.querySelector('.text-center')) {
                commentsContainer.innerHTML = '';
              }

              // Add the new comment at the top
              commentsContainer.insertBefore(commentElement, commentsContainer.firstChild);

              // Set and update relative time for new comment
              const commentDate = new Date();
              const timeElement = document.getElementById(`${commentId}-time`);
              if (timeElement) {
                updateRelativeTime(timeElement, commentDate);
                startRelativeTimeUpdater(timeElement, commentDate);
              }

              // Clear input
              commentInput.value = '';
            });
        })
        .catch(error => {
          console.error("Error adding comment: ", error);
          alert('Error adding comment. Please try again.');
        });
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
      // Load blogs
      loadBlogs();

      // Event listeners
      closeModal.addEventListener('click', closeBlogModal);
      likeBtn.addEventListener('click', likeBlogModal);

      shareBtn.addEventListener('click', () => {
        if (currentBlogData) {
          shareBlog(currentBlogData);
        }
      });

      submitComment.addEventListener('click', addComment);
      saveNameBtn.addEventListener('click', saveCommenterName);

      // Press Enter to submit comment
      commentInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          addComment();
        }
      });

      // Press Enter to save name
      commenterNameInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          saveCommenterName();
        }
      });

      // Show name input when comment input is focused and name not set
      commentInput.addEventListener('focus', () => {
        if (!currentCommenterName) {
          commenterNameContainer.classList.add('active');
        }
      });

      // Close modal when clicking outside
      blogModal.addEventListener('click', (e) => {
        if (e.target === blogModal) {
          closeBlogModal();
        }
      });

      // Mobile menu toggle
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');

      if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => {
          mobileMenu.classList.toggle('hidden');
        });
      }

      (function () {
        // --- configuration / content (edit as needed) ---
        const contactInfo = {
          address: '08/2, Old Delhi Rd, adjacent Country In, Sector 12 A, Anamika Enclave,Sector 14, Gurugram, Haryana 122001',
          phones: ['+91 9810319292', '+91 9810323292'],
          email: 'hr@psypanconsulting.com',
        };

        // PAGE URL map: clicking goto/learn-more opens these pages in the same tab
        const pageUrlMap = {
          'Services': 'services.html',
          'Flagship Programs': 'flagship-programs.html',
          'Blogs': 'blogs.html',
          'Events': 'events.html',
          'Contact': 'contact.html',
          'About Us': 'about-us.html',
          // keep Gallery as optional (if desired, add a page)
          'Gallery': 'gallery.html'
        };

        const servicesList = [
          'Management Training',
          'Employee Engagement',
          'HR Consulting',
          'Employee Assistance',
          'Outbound Training',
          'Soft Skills'
        ];

        const flagshipPrograms = [
          'Managerial Dev. Program',
          'Train The Trainer',
          'Handling Conversation',
          'Campus to Corporate',
          'Business Comm. Skills',
          'Mentoring Skills',
          'Diversity & Inclusion',
          'Sahyog'
        ];

        // Keyword responses (typed input fallback)
        function getBotResponse(message) {
          const lower = message.toLowerCase();
          if (lower.includes('contact') || lower.includes('address')) {
            return `Our office is located at ${contactInfo.address}`;
          }
          if (lower.includes('phone') || lower.includes('call') || lower.includes('contact number')) {
            return `You can reach us at ${contactInfo.phones.join(' or ')}.`;
          }
          if (lower.includes('email') || lower.includes('mail')) {
            return `For inquiries, please email us at ${contactInfo.email}`;
          }
          if (lower.includes('training') || lower.includes('program')) {
            return 'We offer various training programs including Outbound Training, SAHYOG Wellness, and POSH Certification.';
          }
          if (lower.includes('service') || lower.includes('offer')) {
            return 'We provide corporate training solutions in leadership development, team building, and mental wellness programs.';
          }
          // fallback
          return 'I’m here to help! You can click one of the options below or tell me what you need.';
        }

        // --- DOM references ---
        const toggleBtn = document.getElementById('chatbotToggle');
        const windowEl = document.getElementById('chatbotWindow');
        const closeBtn = document.getElementById('chatbotClose');
        const sendBtn = document.getElementById('chatbotSend');
        const inputEl = document.getElementById('chatbotInput');
        const bodyEl = document.getElementById('chatbotBody');
        const optionsContainer = document.getElementById('chatOptions');
        const clearBtn = document.getElementById('chatClear');

        // --- helpers ---
        function scrollChatToBottom() {
          bodyEl.scrollTop = bodyEl.scrollHeight;
        }

        function createMessage({ text, who = 'bot', html = false }) {
          const wrapper = document.createElement('div');
          wrapper.className =
            'chatbot-message ' +
            (who === 'user'
              ? 'user bg-primary text-white rounded-lg p-3 mb-3 max-w-[80%] float-right clear-both text-sm sm:text-base'
              : 'bot bg-blue-50 text-gray-800 rounded-lg p-3 mb-3 max-w-[80%] float-left clear-both text-sm sm:text-base');
          if (html) wrapper.innerHTML = text;
          else wrapper.textContent = text;
          bodyEl.appendChild(wrapper);
          scrollChatToBottom();
          return wrapper;
        }

        function createTypingIndicator() {
          return createMessage({ text: 'Typing...', who: 'bot' });
        }

        // Show quick options and prompt "How may I help you?"
        function showOptionsPrompt(delay = 500) {
          setTimeout(() => {
            createMessage({ text: 'How may I help you?', who: 'bot' });
            renderQuickOptions();
          }, delay);
        }

        // Create clickable quick options
        function renderQuickOptions() {
          optionsContainer.innerHTML = '';

          const mainOptions = [
            { label: 'Services', action: 'services' },
            { label: 'Flagship Programs', action: 'programs' },
            { label: 'Contact', action: 'contact' },
            { label: 'Phone', action: 'phone' },
            { label: 'Email', action: 'email' },
            { label: 'Events', action: 'goto', target: 'Events' },
            { label: 'Gallery', action: 'goto', target: 'Gallery' },
            { label: 'Blogs', action: 'goto', target: 'Blogs' },
            { label: 'About Us', action: 'goto', target: 'About Us' }
          ];

          mainOptions.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'px-3 py-1 text-xs sm:text-sm rounded-full border border-gray-200 hover:bg-slate-50';
            btn.textContent = opt.label;
            btn.dataset.action = opt.action;
            if (opt.target) btn.dataset.target = opt.target;
            optionsContainer.appendChild(btn);
          });

          scrollChatToBottom();
        }

        // Show service details then show options again
        function showServiceDetails(serviceName) {
          const description = `${serviceName} — a tailored solution to address corporate needs. Click Learn more to visit the Services page.`;
          const typing = createTypingIndicator();
          setTimeout(() => {
            typing.remove();
            createMessage({ text: description, who: 'bot' });
            const html = `<div class="mt-2"><button data-action="goto" data-target="Services" class="px-3 py-1 rounded-md bg-primary text-white text-xs">Learn more</button></div>`;
            createMessage({ text: html, who: 'bot', html: true });
            // show options again
            showOptionsPrompt(700);
          }, 700);
        }

        // Show program details then show options again
        function showProgramDetails(programName) {
          const description = `${programName} — structured program designed to build competencies and measurable outcomes. Click Go to Flagship Programs to know more.`;
          const typing = createTypingIndicator();
          setTimeout(() => {
            typing.remove();
            createMessage({ text: description, who: 'bot' });
            const html = `<div class="mt-2"><button data-action="goto" data-target="Flagship Programs" class="px-3 py-1 rounded-md bg-primary text-white text-xs">Go to Flagship Programs</button></div>`;
            createMessage({ text: html, who: 'bot', html: true });
            // show options again
            showOptionsPrompt(700);
          }, 700);
        }

        // Navigate to the mapped page (same tab). If no mapping, fallback to hash navigation.
        function goToPage(name) {
          const normalized = name.trim();
          const url = pageUrlMap[normalized];
          if (url) {
            // give a small confirmation message then navigate
            createMessage({ text: `Opening ${normalized}...`, who: 'bot' });
            // navigate in same tab
            window.location.href = url;
          } else {
            // fallback: attempt scroll to element id
            const id = normalized.toLowerCase().replace(/\s+/g, '-');
            const el = document.getElementById(id);
            if (el) {
              el.scrollIntoView({ behavior: 'smooth', block: 'start' });
              createMessage({ text: `Taking you to ${normalized} section.`, who: 'bot' });
              // show options afterwards
              showOptionsPrompt(700);
            } else {
              createMessage({ text: `Couldn't find a page or section for "${normalized}".`, who: 'bot' });
              showOptionsPrompt(600);
            }
          }
        }

        // --- main event handlers ---
        function handleOptionClick(target) {
          const action = target.dataset.action;
          const t = target.dataset.target || target.textContent;

          if (action === 'services') {
            const typing = createTypingIndicator();
            setTimeout(() => {
              typing.remove();
              createMessage({ text: 'Here are our Services:', who: 'bot' });
              const html = servicesList.map(s => `<button data-action="service" data-name="${s}" class="m-1 px-3 py-1 text-xs rounded-full border border-gray-200">${s}</button>`).join('');
              createMessage({ text: html, who: 'bot', html: true });
              // show options again under the list
              showOptionsPrompt(600);
            }, 500);
            return;
          }

          if (action === 'programs') {
            const typing = createTypingIndicator();
            setTimeout(() => {
              typing.remove();
              createMessage({ text: 'Our Flagship Programs:', who: 'bot' });
              const html = flagshipPrograms.map(p => `<button data-action="program" data-name="${p}" class="m-1 px-3 py-1 text-xs rounded-full border border-gray-200">${p}</button>`).join('');
              createMessage({ text: html, who: 'bot', html: true });
              showOptionsPrompt(600);
            }, 500);
            return;
          }

          if (action === 'contact') {
            createMessage({ text: `Address: ${contactInfo.address}`, who: 'bot' });
            createMessage({ text: `Phone: ${contactInfo.phones.join(' or ')}`, who: 'bot' });
            createMessage({ text: `Email: ${contactInfo.email}`, who: 'bot' });
            showOptionsPrompt(600);
            return;
          }

          if (action === 'phone') {
            createMessage({ text: `Phone: ${contactInfo.phones.join(' or ')}`, who: 'bot' });
            showOptionsPrompt(600);
            return;
          }

          if (action === 'email') {
            createMessage({ text: `Email: ${contactInfo.email}`, who: 'bot' });
            showOptionsPrompt(600);
            return;
          }

          if (action === 'goto') {
            // Open mapped page in same tab
            const targetLabel = target.dataset.target || target.textContent;
            goToPage(targetLabel);
            return;
          }

          if (action === 'service') {
            const name = target.dataset.name;
            showServiceDetails(name);
            return;
          }
          if (action === 'program') {
            const name = target.dataset.name;
            showProgramDetails(name);
            return;
          }

          // fallback: treat as typed content
          const typedText = target.textContent || '';
          createMessage({ text: typedText, who: 'user' });
          const response = getBotResponse(typedText);
          const typing = createTypingIndicator();
          setTimeout(() => {
            typing.remove();
            createMessage({ text: response, who: 'bot' });
            showOptionsPrompt(600);
          }, 800);
        }

        // Delegate clicks inside chat body (for dynamic buttons)
        bodyEl.addEventListener('click', (e) => {
          const btn = e.target.closest('button');
          if (!btn) return;
          const action = btn.dataset.action;
          if (!action) return;
          // small user bubble showing clicked option
          const label = btn.textContent;
          createMessage({ text: label, who: 'user' });
          handleOptionClick(btn);
        });

        // Top-level quick options click
        optionsContainer.addEventListener('click', (e) => {
          const btn = e.target.closest('button');
          if (!btn) return;
          handleOptionClick(btn);
        });

        // send typed message
        function sendMessage() {
          const message = inputEl.value.trim();
          if (!message) return;
          createMessage({ text: message, who: 'user' });
          inputEl.value = '';
          const typing = createTypingIndicator();
          setTimeout(() => {
            typing.remove();
            // If user typed exact name of a service or program, prefer direct show
            const normalized = message.toLowerCase();
            const serviceMatch = servicesList.find(s => normalized === s.toLowerCase());
            const progMatch = flagshipPrograms.find(p => normalized === p.toLowerCase());
            if (serviceMatch) {
              showServiceDetails(serviceMatch);
              return;
            }
            if (progMatch) {
              showProgramDetails(progMatch);
              return;
            }
            // If they typed a page name like 'services' or 'blogs', open page
            const pageKey = Object.keys(pageUrlMap).find(k => k.toLowerCase() === message.toLowerCase());
            if (pageKey) {
              goToPage(pageKey);
              return;
            }
            const response = getBotResponse(message);
            createMessage({ text: response, who: 'bot' });
            showOptionsPrompt(600);
          }, 900);
        }

        // Toggle open/close
        function toggleChatbot() {
          const isHidden = windowEl.classList.contains('hidden');
          if (isHidden) {
            windowEl.classList.remove('hidden');
            // render quick options each time to ensure fresh buttons
            renderQuickOptions();
          } else {
            windowEl.classList.add('hidden');
          }
        }

        // Clear chat
        function clearChat() {
          bodyEl.innerHTML = '';
          createMessage({ text: 'Welcome! Choose an option below or type your question. 👇', who: 'bot' });
          renderQuickOptions();
        }

        // --- wire up events ---
        toggleBtn.addEventListener('click', toggleChatbot);
        closeBtn.addEventListener('click', toggleChatbot);
        sendBtn.addEventListener('click', sendMessage);
        inputEl.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendMessage(); });
        clearBtn.addEventListener('click', clearChat);

      })();
    });
  </script>
</body>

</html>